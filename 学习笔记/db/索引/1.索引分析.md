索引分析

mysql的索引分为MYISAM，InnoDB，MEMORY，MERGE

MyISAM不支持事务，也不支持外键，访问速度快，对事务完整性没有要求或者以SELECT、INSERT为主的应用可以使用这个引擎来创建表，memory数据表使用散列索引，

InnoDB支持事务的提交，回滚和崩溃时恢复数据的能力（redo_log,undo_log,trans_log），较于其他的索引类型，读写数据会慢，而且占用的资源会比较多



InnoDB使用的B-Tree索引



一个索引类型InnoDB的mysql查询一条数据库的流程：

​	首先mysql接到语句之后，mysql有分析器，优化器，执行器，分析器会根据mysql的语法糖，会查询语句进行分析，转成mysql能理解的方式，然后优化器会根据索引以及数据量的大小，为语句的执行提供一个很大概率是最优解的explan，对于执行计划走不走索引，则需要对索引的结构表述下，InnoDB和MyISAM都是使用的是B+Tree树，不过区别在于MyISAM在磁盘块中data存放的是物理磁盘地址。而InnoDB默认主键是很重要的，会使用主键维护一张K-V的表，称为主键索引，然后再在另一个B+Tree树上维护辅助索引，通过辅助索引来找到主键。

​	接下来说下B-tree的数据结构：

​	[B-tree的数据结构](https://blog.csdn.net/cyl937/article/details/53585007)

​	页是磁盘管理的最小单位，也是一次IO操作的单位，页在数据引擎中也可以配置大小，InnoDB默认页是16kb，然后每个磁盘块一般是1~4kb。由多磁盘块组成一个B+树，一个磁盘块会存放n个关键字，以及n+1个指针，存储的总空间不能超过每个磁盘块的大小，当树存放的数据发生变化后（新增/删除），会有分裂上移关键字的操作，使得磁盘最大空间使用率。

​	

​	再来说明B+Tree的数据结构

​	[B+tree的数据结构](https://www.cnblogs.com/wuzhenzhao/p/10341114.html)

​	B+tree与B-tree的区别在于，在最高层树存放的data数据，会使用两个指针，第一个磁盘块最大的数据节点会和父节点旁边关键字的最小数据节点互相有个指针。

有点在于：一种是对于主键的范围查找和分页查找，另一种是从根节点开始，进行随机查找

